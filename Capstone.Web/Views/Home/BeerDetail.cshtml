@using Capstone.Web.Models
@model Beer
<div class="center jumbotron">
    <h2 style="text-align:center">@Model.BreweryName</h2>
    <div class="center" style="text-align:center">
        <h3 style="text-align:center">@Model.Name</h3>
        <br />
        <img src="~/Photos/@Model.Image" style="width:300px; border:1px solid black" />
        <br />
        <div style="text-align:center">
            <h4 style="text-align:center">@Model.BeerType</h4>
            @Model.Description
        </div>
        <div style="text-align:center">
            <strong>ABV: @Model.AlcoholByVolume</strong>
        </div>
    </div>
</div>






@*-------------------------THIS IS POSTING A REVIEW-------------------------------*@
@{int userId = (int)Session["UserId"];}

<div style="height: 200px; width:200px; background-color: lightgray; margin-left: 10px">
    <div id="form-messages"></div>

    <div class="field">
        <label for="rating">Rating:</label>
        <input type="number" id="rating" name="rating" required>
    </div>

    <div class="field">
        <label for="review">Review:</label>
        <input type="text" id="review" name="review" required>
    </div>

    <input hidden id="userId" name="userId" value="@userId" />
    <input hidden id="beerId" name="beerId" value="@Model.BeerID" />
    <input hidden id="date" name="date" value="@DateTime.Now" />

    <div class="field">
        <button id="submitreview" type="submit" style="margin-left: 25%">Submit Review</button>
    </div>
</div>

@*-------------------------THIS IS THE LIST OF REVIEWS-------------------------------*@

<div>

</div>




<script>


    //-------------------------POST A NEW REVIEW TO DB--------------------------
    $(function () {
        $("#submitreview").click(function (event) {
            var rating = $("#rating").val();
            var review = $("#review").val();
            var userId = $("#userId").val();
            var beerId = $("#beerId").val();
            var date = $("#date").val();
            console.log(userId);
            console.log(beerId);
            console.log(date);
            console.log(rating);
            console.log(review);

            $.ajax({
                url: `/Home/ReviewBeer?rating=${rating}&review=${review}&userId=${userId}&beerId=${beerId}&date=${date}`,
                method: "POST",
                dataType: "json",
                success: function (data) {
                    window.location.href = "/Home/BeerDetail";

                }
            })

        })
    })

    //--------------------------GET REVIEWS FROM DB----------------------------
    //$(function () {
    //    var beerId= $("#beerId").val()

    //        $.ajax({
    //            url: "/Home/GetReviewsForBeer?beerId=" + beerId,
    //            method: "GET",
    //            dataType: "json"
    //        }).done(function (reviews) {
    //            console.log(reviews)


</script>
